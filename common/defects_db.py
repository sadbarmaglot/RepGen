DEFECTS_DB = [
    {
        "label": "разрушение и трещины в отмостке, растительность у здания",
        "type": "бетон",
        "location": "отмостка, зона примыкания",
        "damage_type": "трещины, разрушение, зарастание",
        "category": "В",
        "description": "Частичное разрушение, трещины в теле отмостки. Растительность на участках щелей в зонах примыкания отмостки к зданию. Категория \"В\" в соответствии с РД-22-01-97.",
        "recommendation": "Выполнить устройство отмостки у здания по специально разработанному проекту в соответствии с рекомендациями СП 82.13330.2016",
    },

    {
        "label": "щели в зоне примыкания отмостки к зданию",
        "type": "бетон",
        "location": "отмостка, зона примыкания",
        "damage_type": "щели, разрушение примыкания",
        "category": "Б",
        "description": "Образование щелей в зонах примыкания прилегающей территории к зданию Категория \"Б\" в соответствии с РД-22-01-97.",
        "recommendation": "Выполнить устройство отмостки у здания по специально разработанному проекту в соответствии с рекомендациями СП 82.13330.2016",
    },

    {
        "label": "отсутствие отмостки и зарастание территории",
        "type": "бетон",
        "location": "отмостка, зона примыкания",
        "damage_type": "нарушение эксплуатации, зарастание",
        "category": "В",
        "description": "Отсутствие отмостки на большей площади периметра здания. Наличие растительности и кустарников в непосредственной близости от стен здания. Категория \"В\" в соответствии с РД-22-01-97.",
        "recommendation": "Очистить прилегающую территорию от растительности и кустарников. Выполнить устройство отмостки с уклоном от здания шириной не менее 1 метра с обеспечением отвода поверхностных вод.",
    },

    {
        "label": "разрушение отделки и шелушение краски",
        "type": "отделка",
        "location": "фасад",
        "damage_type": "шелушение, разрушение отделочных слоёв",
        "category": "В",
        "description": "Разрушение отделочных слоёв, шелушение окрасочного слоя Категория \"В\" в соответствии с РД-22-01-97.",
        "recommendation": "Выполнить косметический ремонт",
    },

    {
        "label": "поражение грибком и чёрная плесень",
        "type": "отделка",
        "location": "фасад",
        "damage_type": "биопоражение, плесень",
        "category": "В",
        "description": "Следы поражения грибком и образование чёрной плесени на поверхности отделочных материалов Категория \"В\" в соответствии с РД-22-01-97.",
        "recommendation": "Очистить поврежденные участки от грибкового налёта и плесени. При проведении ремонтных работ антисептическую обработку материалов необходимо проводить с применением составов, обладающих комплексным защитным действием и использовать материалы, обладающие биостойкостью.",
    },

    {
        "label": "увлажнение и деструкция кирпичной кладки",
        "type": "кирпич",
        "location": "фасад",
        "damage_type": "деструкция, биопоражение",
        "category": "В",
        "description": "Увлажнение и деструкция кирпичной кладки, биопоражения Категория \"В\" в соответствии с РД-22-01-97.",
        "recommendation": "Выполнить косметический ремонт повреждённых участков. При проведении ремонтных работ антисептическую обработку материалов необходимо проводить с применением составов, обладающих комплексным защитным действием и использовать материалы, обладающие биостойкостью",
    },

    {
        "label": "замокание и высолы",
        "type": "кирпич",
        "location": "фасад",
        "damage_type": "замокание, высолы",
        "category": "В",
        "description": "Следы длительных замоканий, высолы на поверхности кирпичной кладки Категория \"В\" в соответствии с РД-22-01-97.",
        "recommendation": "Провести химическое блокирование глубинных остаточных засолений в зонах высолов. Расчищенные участки в местах с высолами обработать пропиткой (как вариант, «Antisulfat» производства фирмы Bostik Findley). Произвести косметический ремонт поврежденных участков стен",
    },

    {
        "label": "деструкция отделки и выветривание кирпичной кладки",
        "type": "кирпич",
        "location": "фасад",
        "damage_type": "деструкция, выветривание кирпича, разрушение отделки",
        "category": "В",
        "description": "Деструкция отделочных слоев стен по фасадам здания. Разрушение, выветривание кирпича и раствора кирпичной кладки наружных стен на глубину до 30 мм Категория \"В\" в соответствии с РД-22-01-97.",
        "recommendation": "Очистить поврежденные участки от отслаивающегося материала, пыли и растительности, восстановить кирпичную кладку на участках деструкции. Выполнить оштукатуривание (как вариант, использовать санирующую ремонтную штукатурку К-30 Bostik) и окраску поверхности",
    },

    {
        "label": "деформация пожарной лестницы",
        "type": "металл",
        "location": "пожарная лестница",
        "damage_type": "деформация, коррозия, нарушение крепления",
        "category": "Б",
        "description": "Деформация металлической пожарной лестницы. Категория \"Б\" в соответствии с РД-22-01-97.",
        "recommendation": "Выполнить замену металлической лестницы.",
    },

    {
        "label": "коррозия металлических элементов",
        "type": "металл",
        "location": "металлические элементы",
        "damage_type": "коррозия, разрушение антикоррозионного слоя",
        "category": "Б",
        "description": "Разрушение антикоррозионного слоя, поверхностная коррозия металлических элементов Категория \"Б\" в соответствии с РД-22-01-97.",
        "recommendation": "Очистить элементы от продуктов коррозии, восстановить антикоррозионный слой согласно рекомендациям СП 28.13330.2017.",
    },

    {
        "label": "деформация металлических листов",
        "type": "металл",
        "location": "кровля",
        "damage_type": "деформация",
        "category": "Б",
        "description": "Погиб металлических листов кровли Категория \"Б\" в соответствии с РД-22-01-97.",
        "recommendation": "По совокупности дефектов и повреждений выполнить ремонт кровли здания по специально разработанному проекту в соответствии с СП 17.13330.2017",
    },

    {
        "label": "коррозия металлических дверей",
        "type": "металл",
        "location": "двери",
        "damage_type": "коррозия",
        "category": "Б",
        "description": "Разрушение антикоррозионного слоя, поверхностная коррозия металлических дверей Категория \"Б\" в соответствии с РД-22-01-97.",
        "recommendation": "Выполнить замену дверных заполнений здания",
    },

    {
        "label": "отсутствие защитных зонтов",
        "type": "кровля",
        "location": "технологические выпуски",
        "damage_type": "отсутствие элементов",
        "category": "В",
        "description": "Отсутствие защитных зонтов над технологическими выпусками Категория \"В\" в соответствии с РД-22-01-97.",
        "recommendation": "Выполнить устройство зонтов над технологическими выпусками",
    },

    {
        "label": "вздутия и застой воды",
        "type": "рулонная гидроизоляция",
        "location": "кровля",
        "damage_type": "вздутия, застой воды, нарушение уклонов",
        "category": "Б",
        "description": "Отслоения от основания, многочисленные вздутия с образованием воздушных пузырей. Участки со следами застоя воды на кровле здания, вызванные контруклонами кровли. Категория \"Б\" в соответствии с РД-22-01-97.",
        "recommendation": "По совокупности дефектов и повреждений выполнить ремонт кровли здания по специально разработанному проекту в соответствии с СП 17.13330.2017",
    },

    {
        "label": "разрушение примыкания к парапету",
        "type": "рулонная гидроизоляция",
        "location": "кровля",
        "damage_type": "отрыв гидроизоляции, разрушение примыканий, разгерметизация",
        "category": "Б",
        "description": "Отсутствие герметичности, отрыв рулонной гидроизоляции от парапетов и стен здания, отсутствие прижимных планок на участках примыкания рулонной гидроизоляции к парапетам и стенам здания Категория \"Б\" в соответствии с РД-22-01-97.",
        "recommendation": "По совокупности дефектов и повреждений выполнить ремонт кровли здания по специально разработанному проекту в соответствии с СП 17.13330.2017",
    },

    {
        "label": "оголение и коррозия армирования",
        "type": "железобетон",
        "location": "плита покрытия",
        "damage_type": "разрушение защитного слоя, коррозия",
        "category": "В",
        "description": "Разрушение защитного слоя бетона с оголением и поверхностной коррозией рабочего армирования железобетонных плит покрытия Категория \"В\" в соответствии с РД-22-01-97.",
        "recommendation": "Очистить поврежденные участки от отслаивающегося материала, арматуру от продуктов коррозии, восстановить защитный слой бетона",
    },

    {
        "label": "оголение и коррозия армирования",
        "type": "железобетон",
        "location": "стеновая панель",
        "damage_type": "разрушение защитного слоя, коррозия",
        "category": "В",
        "description": "Разрушение защитного слоя бетона с оголением и поверхностной коррозией рабочего армирования железобетонных стеновых панелей Категория \"В\" в соответствии с РД-22-01-97.",
        "recommendation": "Очистить поврежденные участки от отслаивающегося материала, арматуру от продуктов коррозии, восстановить защитный слой бетона",
    },

    {
        "label": "трещины и разрушение заделки швов",
        "type": "железобетон",
        "location": "стеновая панель",
        "damage_type": "трещины",
        "category": "В",
        "description": "Трещины, разрушение заделки швов стеновых панелей здания Категория \"В\" в соответствии с РД-22-01-97.",
        "recommendation": "Трещины расшить, отчистить от слабопрочного материала и пыли. Выполнить закладку внутрь шва изоляционного уплотнителя (как вариант, вилатерм) соответствующего диаметра и нанести слой герметизирующей мастики. Выполнить оштукатуривание и окраску поверхности",
    },

    {
        "label": "трещины",
        "type": "газобетон",
        "location": "газобетонные блоки",
        "damage_type": "трещины",
        "category": "В",
        "description": "Трещины в газобетонных блоках, шириной раскрытия до 2 мм Категория \"В\" в соответствии с РД-22-01-97.",
        "recommendation": "Трещины расшить, очистить от слабопрочного материала, пыли и растительности. Выполнить инъектирование трещин в кирпичной кладке стен с применением безусадочных растворов под давлением (как вариант ЭМАКО)",
    },

    {
        "label": "разрушение плиточного покрытия",
        "type": "керамическая плитка",
        "location": "покрытие пола",
        "damage_type": "разрушение покрытия",
        "category": "В",
        "description": "Разрушение покрытия полов из керамической плитки Категория \"В\" в соответствии с РД-22-01-97.",
        "recommendation": "Выполнить косметический ремонт полов здания",
    },

    {
        "label": "деструкция кирпичной кладки",
        "type": "кирпич",
        "location": "наружная стена",
        "damage_type": "деструкция",
        "category": "В",
        "description": "Участки деструкции материалов кирпичной кладки наружных стен на глубину до 70 мм в результате систематического замачивания атмосферными осадками и разрушения в период знакопеременных температур Категория \"В\" в соответствии с РД-22-01-97.",
        "recommendation": "Очистить поврежденные участки от отслаивающегося материала. Произвести восстановление кирпичной кладки стен в местах выявленных повреждений",
    },

    {
        "label": "биопоражение стеновых панелей",
        "type": "железобетон",
        "location": "стеновая панель",
        "damage_type": "биопоражение",
        "category": "В",
        "description": "Биопоражение стеновых панелей. Категория \"В\" в соответствии с РД-22-01-97.",
        "recommendation": "Выполнить косметический ремонт повреждённых участков. При проведении ремонтных работ антисептическую обработку материалов необходимо проводить с применением составов, обладающих комплексным защитным действием и использовать материалы, обладающие биостойкостью.",
    },

    {
        "label": "биопоражение и осадка крыльца",
        "type": "бетон",
        "location": "крыльцо",
        "damage_type": "биопоражение, осадка",
        "category": "Б",
        "description": "Биоповреждение, осадка крыльца. Категория \"Б\" в соответствии с РД-22-01-97.",
        "recommendation": "По совокупности дефектов выполнить замену конструкций входной группы по специально разработанному проекту.",
    },

    {
        "label": "разрушение оконных блоков",
        "type": "стекло",
        "location": "фасад",
        "damage_type": "разрушение, утрата элементов",
        "category": "Б",
        "description": "Разрушение оконных блоков. Категория \"Б\" в соответствии с РД-22-01-97.",
        "recommendation": "Выполнить замену заполнений оконных проёмов на участках разрушения",
    },

    {
        "category": "В",
        "description": "Разрушение защитного слоя бетона с оголением и поверхностной коррозией рабочего армирования керамзитобетонных панелей Категория \"В\" в соответствии с РД-22-01-97.",
        "recommendation": "Очистить поврежденные участки от отслаивающегося материала, арматуру от продуктов коррозии, восстановить защитный слой бетона",
    },

    {
        "category": "В",
        "description": "Разрушение защитного слоя бетона с оголением и поверхностной коррозией рабочего армирования балок монолитных железобетонных перекрытий Категория \"В\" в соответствии с РД-22-01-97.",
        "recommendation": "Очистить поврежденные участки от отслаивающегося материала, арматуру от продуктов коррозии, восстановить защитный слой бетона",
    },

    {
        "category": "В",
        "description": "Разрушение защитного слоя бетона с оголением и поверхностной коррозией рабочего армирования железобетонных колонн Категория \"В\" в соответствии с РД-22-01-97.",
        "recommendation": "Очистить поврежденные участки от отслаивающегося материала, арматуру от продуктов коррозии, восстановить защитный слой бетона",
    },

    {
        "category": "В",
        "description": "Разрушение защитного слоя бетона с оголением и поверхностной коррозией рабочего армирования железобетонных перекрытий Категория \"В\" в соответствии с РД-22-01-97.",
        "recommendation": "Очистить поврежденные участки от отслаивающегося материала, арматуру от продуктов коррозии, восстановить защитный слой бетона",
    },

    {
        "category": "В",
        "description": "Следы замоканий на поверхности плит перекрытий в зоне межпанельных швов Категория \"В\" в соответствии с РД-22-01-97.",
        "recommendation": "Выполнить косметический ремонт повреждённых участков",
    },

    {
        "category": "В",
        "description": "Следы длительного замокания стен. Деструкция отделочных слоев Категория \"В\" в соответствии с РД-22-01-97.",
        "recommendation": "Выполнить косметический ремонт повреждённых участков",
    },

    {
        "category": "В",
        "description": "Следы длительного замокания перекрытий. Деструкция отделочных слоев Категория \"В\" в соответствии с РД-22-01-97.",
        "recommendation": "Выполнить косметический ремонт повреждённых участков",
    },

    {
        "category": "В",
        "description": "Высолы на наружной поверхности кирпичной кладки стен здания. Категория \"В\" в соответствии с РД-22-01-97.",
        "recommendation": "Провести химическое блокирование глубинных остаточных засолений в зонах высолов. Расчищенные участки в местах с высолами обработать пропиткой (как вариант, «Antisulfat» производства фирмы Bostik Findley). Произвести косметический ремонт поврежденных участков стен.",
    },

    {
        "category": "Б",
        "description": "Разрушение антикоррозионного слоя, слоистая коррозия металлических элементов с уменьшением толщины сечения Категория \"Б\" в соответствии с РД-22-01-97.",
        "recommendation": "Выполнить усиление повреждённых участков по специально разработанному проекту",
    },

    {
        "category": "Б",
        "description": "Обветшание деревянных оконных заполнений, следы длительных замоканий деревянных элементов оконных переплетов, трещины, ослабление в сопряжениях, неплотный притвор, частичная утрата остекления оконных переплетов, биологическая коррозия деревянных рам Категория \"Б\" в соответствии с РД-22-01-97.",
        "recommendation": "Выполнить замену оконных заполнений по специально разработанному проекту",
    },

    {
        "category": "Б",
        "description": "Отсутствие дверных заполнений, биологическая коррозия в зонах замоканий Категория \"Б\" в соответствии с РД-22-01-97.",
        "recommendation": "Выполнить замену дверных заполнений по специально разработанному проекту",
    },

    {
        "category": "В",
        "description": "Непроектное отверстие заделано с помощью металлического листа. Заделка выполнена некачественно и существует опасность обрушения! металлического листа Категория \"В\" в соответствии с РД-22-01-97.",
        "recommendation": "Очистить поврежденные участки от отслаивающегося материала, арматуру от продуктов коррозии, восстановить защитный слой бетона плит покрытия",
    },

    {
        "category": "В",
        "description": "Непроектные отверстия в плитах покрытия с разрушением защитного слоя бетона с оголением и поверхностной коррозией рабочего армирования железобетонных плит покрытия в результате протечек Категория \"В\" в соответствии с РД-22-01-97.",
        "recommendation": "Очистить поврежденные участки от отслаивающегося материала, арматуру от продуктов коррозии, восстановить защитный слой бетона плит покрытия",
    },

    {
        "category": "В",
        "description": "Следы замоканий, высолы на поверхности стен и потолков Категория \"В\" в соответствии с РД-22-01-97.",
        "recommendation": "По совокупности дефектов необходимо выполнить косметический ремонт отделочных слоёв внутренних помещений здания. Провести химическое блокирование глубинных остаточных засолений в зонах высолов. Расчищенные участки в местах с высолами обработать пропиткой (как вариант, «Antisulfat» производства фирмы Bostik Findley).",
    },

    {
        "category": "В",
        "description": "Разрушение керамической плитки на поверхности стен Категория \"В\" в соответствии с РД-22-01-97.",
        "recommendation": "По совокупности дефектов необходимо выполнить косметический ремонт отделочных слоёв внутренних помещений здания",
    },

    {
        "category": "Б",
        "description": "Отклонение кирпичной кладки от вертикальной оси до 52 мм. Отсутствие перевязки кирпичной кладки стенового ограждения с колоннами каркаса. Существующее усиление с помощью металлической обоймы не выполняет свою функцию в полной мере Категория \"Б\" в соответствии с РД-22-01-97.",
        "recommendation": "Выполнить демонтаж существующего участка стенового ограждения. Выполнить перекладку повреждённого участка кирпичной кладки стенового ограждения здания по специально разработанному проекту с обязательной перевязкой",
    },

    {
        "category": "В",
        "description": "Трещины по внутренней кирпичной стене, шириной раскрытия до 2мм Категория \"В\" в соответствии с РД-22-01-97.",
        "recommendation": "Трещины расшить, очистить от слабопрочного материала, пыли и растительности. Выполнить инъектирование трещин в кирпичной кладке стен с применением безусадочных растворов под давлением (как вариант ЭМАКО).\nПо совокупности дефектов необходимо выполнить косметический ремонт отделочных слоёв внутренних помещений здания",
    },

    {
        "category": "В",
        "description": "Трещина в кирпичной перегородке, шириной раскрытия до 1,5 мм Категория \"В\" в соответствии с РД-22-01-97.",
        "recommendation": "Трещины расшить, очистить от слабопрочного материала, пыли и растительности. Выполнить инъектирование трещин в кирпичной кладке стен с применением безусадочных растворов под давлением (как вариант ЭМАКО).\nПо совокупности дефектов необходимо выполнить косметический ремонт отделочных слоёв внутренних помещений здания",
    },

    {
        "category": "В",
        "description": "Следы увлажнения, высолы на поверхности кирпичной кладки в результате капиллярного подсоса кирпичной кладки Категория \"В\" в соответствии с РД-22-01-97.",
        "recommendation": "Провести химическое блокирование глубинных остаточных засолений в зонах высолов. Расчищенные участки в местах с высолами обработать пропиткой (как вариант, «Antisulfat» производства фирмы Bostik Findley).\nПо совокупности дефектов необходимо выполнить косметический ремонт отделочных слоёв внутренних помещений здания",
    },

    {
        "category": "Б",
        "description": "Продольные трещины в зоне прохода армирования и поперечные трещины в зоне закладных деталей в результате коррозии металлических элементов Категория \"Б\" в соответствии с РД-22-01-97.",
        "recommendation": "Очистить поврежденные участки от отслаивающегося материала, арматуру от продуктов коррозии, восстановить защитный слой бетона. Выполнить усиление повреждённой колонны с помощью металлической обоймы (как вариант, из равнополочных уголков 75х75х6 по всему периметру)",
    },

    {
        "category": "Б",
        "description": "Разрушение, трещины, сколы, утрата на участках площадью до 20 м2 покрытия полов из керамической плитки Категория \"Б\" в соответствии с РД-22-01-97.",
        "recommendation": "По совокупности дефектов необходимо выполнить ремонт с восстановлением покрытия пола",
    },

    {
        "category": "Б",
        "description": "Системы холодного и горячего водоснабжения обследуемого здания частично утрачены.\nНеудовлетворительное состояние канализационных стояков (коррозия, подтеки в местах раструбных соединений).\nЧастичная утрата санитарно-технических приборов.\nСистема отопления обследуемого здания частично утрачена.\nСистема принудительной вентиляции частично утрачена и находится в неработоспособном состоянии.\nЭлектропроводки местами выполнены по временной схеме, на скрутках, не закреплены.\nПусковая аппаратура (штепсельные розетки, выключатели и т.д.) находится в изношенном состоянии и частично утрачены. Категория \"Б\" в соответствии с РД-22-01-97.",
        "recommendation": "По результатам обследования инженерных сетей здания установлено, что системы электрооборудования, электропроводки, системы отопления, вентиляции, водоснабжения, канализации находятся в неудовлетворительном состоянии: не соответствуют действующим нормам и нуждаются в замене. Для безопасной эксплуатации инженерных сетей здания рекомендуется выполнить полную их реконструкцию в соответствии с действующими нормативными документами. Все работы по ремонту и реконструкции инженерных сетей должны выполняться по специально разработанному проекту",
    },

    {
        "category": "Б",
        "description": "Частичное разрушение отмостки. Растительность на участках щелей в зонах примыкания отмостки к зданию Категория \"Б\" в соответствии с РД-22-01-97.",
        "recommendation": "Выполнить устройство отмостки у здания по специально разработанному проекту в соответствии с рекомендациями СП 82.13330.2016",
    },

    {
        "category": "В",
        "description": "Складирование строительных материалов на прилегающей территории к зданию Категория \"В\" в соответствии с РД-22-01-97.",
        "recommendation": "Очистить прилегающую территорию от складируемых строительных материалов",
    },

    {
        "category": "А",
        "description": "Сквозная коррозия металлических элементов. Деформации покрытия и стенового ограждения входных лестничных спусков. Возможно обрушение строительных конструкций Категория \"А\" в соответствии с РД-22-01-97.",
        "recommendation": "Выполнить замену конструкций лестничных спусков в подвал здания по специально разработанному проекту.\nДо окончания выполнения ремонтных работ необходимо исключить доступ людей в зону возможного обрушения строительных конструкций, установить ограждения и запрещающие знаки: «опасная зона» и «проход запрещен» по ГОСТ 12.4.026-2015",
    },

    {
        "category": "Б",
        "description": "Затопление помещений подвала водой на глубину до 30 см Категория \"Б\" в соответствии с РД-22-01-97.",
        "recommendation": "Выполнить мероприятия по предотвращению затоплений (выполнить ревизию узлов коммуникаций, выполнить капитальный ремонт кровли). Выполнить просушивание конструкций с последующим восстановлением отделочных слоев.",
    },

    {
        "category": "Б",
        "description": "Сеть наклонных, вертикальных и горизонтальных (местами сквозных) трещин в кирпичной кладке перегородок здания шириной раскрытия до 40 мм, вызванные неравномерной осадкой фундаментов и пола 1-го этажа на высоту до 30мм Категория \"Б\" в соответствии с РД-22-01-97.",
        "recommendation": "Выполнить демонтаж с последующим переустройством кирпичных перегородок по специально разработанному проекту",
    },

    {
        "category": "В",
        "description": "Разрушение отделочных слоёв полов, стен и потолков. Трещины в бетонных полах, шириной раскрытия до 2мм. Категория \"В\" в соответствии с РД-22-01-97.",
        "recommendation": "Выполнить косметический ремонт повреждённых участков",
    },

    {
        "category": "Б",
        "description": "Следы замоканий на поверхности перекрытий. Участки застоя воды на поверхности полов Категория \"Б\" в соответствии с РД-22-01-97.",
        "recommendation": "Провести ревизию инженерных систем.\nВыполнить ремонт кровли по специально разработанному проекту в соответствии с СП 17.13330.2017",
    },

    {
        "category": "Б",
        "description": "Продольная трещина в теле сборной железобетонной плиты, шириной раскрытия до 3мм Категория \"Б\" в соответствии с РД-22-01-97.",
        "recommendation": "Выполнить демонтаж повреждённой сборной железобетонной плиты. Вместо демонтированной плиты выполнить устройство монолитного железобетонного участка по специально разработанному проекту",
    },

    {
        "category": "В",
        "description": "Вертикальные трещины в зонах примыкания стеновых панелей лестничной клетки к колоннам каркаса здания Категория \"В\" в соответствии с РД-22-01-97.",
        "recommendation": "Выполнить косметический ремонт повреждённых участков",
    },

    {
        "category": "В",
        "description": "Механическое разрушение (непроектные отверстия под инженерные сети) защитного слоя бетона с оголением и поверхностной коррозией рабочего армирования железобетонной плиты Категория \"В\" в соответствии с РД-22-01-97.",
        "recommendation": "Очистить поврежденные участки от отслаивающегося материала, арматуру от продуктов коррозии, восстановить защитный слой бетона",
    },

    {
        "category": "А",
        "description": "Продавливание плиты в результате силового воздействия. Разрушение защитного слоя бетона, вывалы с оголением и деформацией рабочего армирования.\nВозможно обрушение строительных конструкций Категория \"А\" в соответствии с РД-22-01-97.",
        "recommendation": "Выполнить демонтаж повреждённых железобетонных плит. Вместо демонтированных плит выполнить устройство монолитных железобетонных участков по специально разработанному проекту.\nДо окончания выполнения ремонтных работ необходимо исключить доступ людей в зону возможного обрушения строительных конструкций, установить ограждения и запрещающие знаки: «опасная зона» и «проход запрещен» по ГОСТ 12.4.026-2015",
    },

    {
        "category": "А",
        "description": "Разрушение защитного слоя бетона в зоне прокладки инженерных сетей, вывалы с оголением и деформацией и коррозией рабочего армирования.\nВозможно обрушение строительных конструкций Категория \"А\" в соответствии с РД-22-01-97.",
        "recommendation": "Выполнить демонтаж повреждённых железобетонных плит. Вместо демонтированных плит выполнить устройство монолитных железобетонных участков по специально разработанному проекту.\nДо окончания выполнения ремонтных работ необходимо исключить доступ людей в зону возможного обрушения строительных конструкций, установить ограждения и запрещающие знаки: «опасная зона» и «проход запрещен» по ГОСТ 12.4.026-2015",
    },

    {
        "category": "Б",
        "description": "Непроектные отверстия под инженерные сети в кирпичной перегородке здания Категория \"Б\" в соответствии с РД-22-01-97.",
        "recommendation": "Выполнить восстановление целостности кирпичной кладки перегородки",
    },

    {
        "category": "Б",
        "description": "Деструкция материалов заделки швов между сборными железобетонными плитами Категория \"Б\" в соответствии с РД-22-01-97.",
        "recommendation": "Швы расшить, очистить от слабопрочного материала, восстановить материал заделки швов плит покрытия.",
    },

    {
        "category": "Б",
        "description": "Образование вздутий рулонной гидроизоляции кровельного покрытия в результате затекания воды под слои гидроизоляционного покрытия, образование микротрещин в рулонном покрытии.  Участки со следами застоя воды на кровле, вызванные контруклонами кровли и засорением водоприёмных воронок Категория \"Б\" в соответствии с РД-22-01-97.",
        "recommendation": "По совокупности дефектов необходимо выполнить ремонт кровли здания по специально разработанному проекту в соответствии с СП 17.13330.2017",
    },

    {
        "category": "Б",
        "description": "Частичная утрата, вывод из эксплуатации инженерных сетей здания (электроснабжения, водоснабжения, канализации, отопления, электроснабжений и сетей связи) Категория \"Б\" в соответствии с РД-22-01-97.",
        "recommendation": "Восстановить инженерные системы здания по специально разработанному проекту в соответствии с СП 30.13330.2020, СП 60.13330.2020,\nПУЭ (7-е издание)",
    },
]


DEFECTS_TEXT = "\n".join([
    f"- {d['description']} → {d['recommendation']}" for d in DEFECTS_DB
])

PROMPT = f"""
Ты технический специалист. На фото — участок строительной конструкции с повреждением.

Вот база известных дефектов и рекомендаций:
{DEFECTS_TEXT}

Определи:
1. Какой дефект ты видишь?
2. Подбери наиболее подходящее описание дефекта из базы.
3. Верни также рекомендацию.
4. Определи категорию технического состояния (А, Б или В) согласно РД-22-01-97.

Ответ строго в JSON:
{{
  "defect_description": "описание из базы",
  "recommendation": "соответствующее решение",
  "category": "А/Б/В"
}}
"""

SYSTEM_MESSAGE = {
    "role": "system",
    "content": "Ты помощник по техническому обследованию зданий."
}

def get_overall_category(defects_list):
    """
    Определяет общую категорию технического состояния строительных конструкций
    на основе количества дефектов каждой категории
    """
    category_counts = {"А": 0, "Б": 0, "В": 0}
    
    for defect in defects_list:
        category = defect.get("category", "Б")
        if category in category_counts:
            category_counts[category] += 1
    
    # Логика определения общей категории:
    # Если есть хотя бы один дефект категории А - общая категория А
    if category_counts["А"] > 0:
        return "А"
    
    # Если дефектов категории Б больше или равно дефектам категории В - общая категория Б
    if category_counts["Б"] >= category_counts["В"]:
        return "Б"
    
    # Иначе - категория В
    return "В"

def get_category_summary(defects_list):
    """Возвращает сводку по категориям дефектов"""
    category_counts = {"А": 0, "Б": 0, "В": 0}
    
    for defect in defects_list:
        category = defect.get("category", "Б")
        if category in category_counts:
            category_counts[category] += 1
    
    total = sum(category_counts.values())
    
    summary = f"Всего выявлено дефектов: {total}\n"
    summary += f"Категория А (аварийное состояние): {category_counts['А']}\n"
    summary += f"Категория Б (ограниченно работоспособное): {category_counts['Б']}\n" 
    summary += f"Категория В (работоспособное): {category_counts['В']}\n"
    summary += f"Общая категория технического состояния: {get_overall_category(defects_list)}"
    
    return summary
